<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>应用开发 | 小储云官网</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="小储商城,小储开发文档已更新至V1.9+">
    <link rel="preload" href="/assets/css/0.styles.d727f307.css" as="style"><link rel="preload" href="/assets/js/app.d1387d5f.js" as="script"><link rel="preload" href="/assets/js/2.8839d181.js" as="script"><link rel="preload" href="/assets/js/8.b69a98fd.js" as="script"><link rel="prefetch" href="/assets/js/10.a80078f5.js"><link rel="prefetch" href="/assets/js/11.296a1de3.js"><link rel="prefetch" href="/assets/js/3.33df22ac.js"><link rel="prefetch" href="/assets/js/4.1fd4719a.js"><link rel="prefetch" href="/assets/js/5.13e7cf97.js"><link rel="prefetch" href="/assets/js/6.3e134d34.js"><link rel="prefetch" href="/assets/js/7.70ad0fbc.js"><link rel="prefetch" href="/assets/js/9.d5018899.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d727f307.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="小储云官网" class="logo"> <span class="site-name can-hide">小储云官网</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/pages/exploit/enter.html" class="nav-link">
  入驻
</a></div><div class="nav-item"><a href="https://bbs.api.ln.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  论坛
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v1.90" class="dropdown-title"><span class="title">v1.90</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  2.0x
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://cdn.api.ln.cn/api/wxapi/view/flock.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官方交流群
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://cdn.api.ln.cn/api/wxapi/view" target="_blank" rel="noopener noreferrer" class="nav-link external">
  登陆/注册
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/pages/exploit/enter.html" class="nav-link">
  入驻
</a></div><div class="nav-item"><a href="https://bbs.api.ln.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  论坛
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v1.90" class="dropdown-title"><span class="title">v1.90</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://baidu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  2.0x
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://cdn.api.ln.cn/api/wxapi/view/flock.php" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官方交流群
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://cdn.api.ln.cn/api/wxapi/view" target="_blank" rel="noopener noreferrer" class="nav-link external">
  登陆/注册
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>准备工作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/install/" class="sidebar-link">安装部署</a></li><li><a href="/pages/install/update.html" class="sidebar-link">升级系统</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>开发文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/exploit/" aria-current="page" class="sidebar-link">开放接口</a></li><li><a href="/pages/joint/" class="sidebar-link">系统对接</a></li><li><a href="/pages/exploit/own.html" aria-current="page" class="active sidebar-link">应用开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#开发须知" class="sidebar-link">开发须知</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#目录结构" class="sidebar-link">目录结构</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#插件开发" class="sidebar-link">插件开发</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#模板开发" class="sidebar-link">模板开发</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#支付开发" class="sidebar-link">支付开发</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#内置方法" class="sidebar-link">内置方法</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#发布说明" class="sidebar-link">发布说明</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#输入验证" class="sidebar-link">输入验证</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#应用钩子" class="sidebar-link">应用钩子</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#沙盒测试" class="sidebar-link">沙盒测试</a></li><li class="sidebar-sub-header"><a href="/pages/exploit/own.html#sdk及demo下载" class="sidebar-link">SDK及DEMO下载</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>入驻平台</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/exploit/enter.html" class="sidebar-link">入驻平台</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="应用开发"><a href="#应用开发" class="header-anchor">#</a> 应用开发</h1> <h2 id="开发须知"><a href="#开发须知" class="header-anchor">#</a> 开发须知</h2> <h4 id="_1、必须认证小储开发者"><a href="#_1、必须认证小储开发者" class="header-anchor">#</a> 1、必须认证小储开发者</h4> <h4 id="_2、拥有小储程序授权，用于调试你的应用！"><a href="#_2、拥有小储程序授权，用于调试你的应用！" class="header-anchor">#</a> 2、拥有小储程序授权，用于调试你的应用！</h4> <h4 id="_3、必须加入小储开发者交流群：1142527578"><a href="#_3、必须加入小储开发者交流群：1142527578" class="header-anchor">#</a> 3、必须加入小储开发者交流群：1142527578</h4> <h4 id="_4、拥有php开发经验或前端开发经验！"><a href="#_4、拥有php开发经验或前端开发经验！" class="header-anchor">#</a> 4、拥有PHP开发经验或前端开发经验！</h4> <h4 id="_5、知道如何看文档-理解力强，会问问题，咨询大佬时永远不要问无用的问题，如在吗-，在-，直接说有什么事，说清楚就行，这样子可以节省双方的时间"><a href="#_5、知道如何看文档-理解力强，会问问题，咨询大佬时永远不要问无用的问题，如在吗-，在-，直接说有什么事，说清楚就行，这样子可以节省双方的时间" class="header-anchor">#</a> 5、知道如何看文档,理解力强，会问问题，咨询大佬时永远不要问无用的问题，如在吗?，在?，直接说有什么事，说清楚就行，这样子可以节省双方的时间</h4> <p><strong>Ps：若您已经满足以上条件，即可开始阅读文档，了解本系统的开发思路，开发模式，有什么不懂的地方可以前往开发者交流群咨询！</strong></p> <h2 id="目录结构"><a href="#目录结构" class="header-anchor">#</a> 目录结构</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>.
├── admin (站长后台)
├── assets (站点资源目录)
├── includes (方法目录，所有的类，方法全部存放在此)
├───├─── extend（扩展类）
├───├────├─── log（网站缓存,日志）
├───├────├───├─── Astrict（重复订单限制）
├───├────├───├─── Backup（网站数据备份）
├───├────├───├─── Cache（货源目录缓存）
├───├────├───├─── Cookie（货源登陆Cookie）
├───├────├───├─── Home（首页缓存文件,包含请求缓存）
├───├────├───├─── Image（商品海报缓存图片）
├───├────├───├─── ShopImage（商品海报合成部件缓存）
├───├────├───├─── Order（订单缓存）
├───├────├───├─── safety（安全中心日志缓存）
├───├────├───├─── Supply（货源对接日志缓存）
├───├─── lib（静态类）
├───├────├─── AppStore（应用操作）
├───├────├─── framework（文件自动引入）
├───├────├─── Hook（钩子触发器操作）
├───├────├─── medoo（Medoo数据库操作）
├───├────├─── Pay（站点支付操作）
├───├────├─── rule（下单输入规则操作）
├───├────├─── soft（站点应用均存放在此）
├───├────├───├─── conf（应用配置）
├───├────├───├─── controller（应用控制器）
├───├────├───├─── view（应用视图文件）
├───├────├─── supply（货源对接，订单操作）
├── install (程序安装)
├── template (站点模板视图文件)
├───├─── default（默认模板文件存放处）
├── user (用户后台)
├───├─── image（用户推广图片存放处）
.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><strong>此目录结构适用于V1.9+版本，开发应用时需了解</strong></p> <h2 id="插件开发"><a href="#插件开发" class="header-anchor">#</a> 插件开发</h2> <h3 id="_1、插件开发须知"><a href="#_1、插件开发须知" class="header-anchor">#</a> 1、插件开发须知</h3> <h4 id="_1、应用安装成功后会生成一个json配置文件，如：d41cxxxxx2faef38d87fxxxxx3ce9c0-conf-json，由当前站点的安装token-conf-json-组成，文件存放地址：conf-应用标识"><a href="#_1、应用安装成功后会生成一个json配置文件，如：d41cxxxxx2faef38d87fxxxxx3ce9c0-conf-json，由当前站点的安装token-conf-json-组成，文件存放地址：conf-应用标识" class="header-anchor">#</a> 1、应用安装成功后会生成一个json配置文件，如：d41cxxxxx2faef38d87fxxxxx3ce9c0_conf.json，由当前站点的安装token+_conf.json 组成，文件存放地址：conf/应用标识/</h4> <h4 id="_2、插件应用视图文件目录下必须创建一个index-tp文件，打开应用设置面板时默认载入此文件，文件存放地址：view-应用标识-index-tp"><a href="#_2、插件应用视图文件目录下必须创建一个index-tp文件，打开应用设置面板时默认载入此文件，文件存放地址：view-应用标识-index-tp" class="header-anchor">#</a> 2、插件应用视图文件目录下必须创建一个index.TP文件，打开应用设置面板时默认载入此文件，文件存放地址：view/应用标识/index.TP</h4> <h4 id="_3、每一个应用都有一个独一无二的应用标识，英文或数字组合，和应用目录名称保持一致，如应用标识为：epay，则应用控制器文件存储位置为：controller-epay-index-php，如下所示-插件目录"><a href="#_3、每一个应用都有一个独一无二的应用标识，英文或数字组合，和应用目录名称保持一致，如应用标识为：epay，则应用控制器文件存储位置为：controller-epay-index-php，如下所示-插件目录" class="header-anchor">#</a> 3、每一个应用都有一个独一无二的应用标识，英文或数字组合，和应用目录名称保持一致，如应用标识为：epay，则应用控制器文件存储位置为：controller/epay/index.php，如下所示 <a href="#_2%E3%80%81%E6%8F%92%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">插件目录</a></h4> <h4 id="_4、每一个插件应用必须拥有一个帮助文件，文件名称：help-html-，存放位置：conf-应用标识-help-html"><a href="#_4、每一个插件应用必须拥有一个帮助文件，文件名称：help-html-，存放位置：conf-应用标识-help-html" class="header-anchor">#</a> 4、每一个插件应用必须拥有一个帮助文件，文件名称：help.html ，存放位置：conf/应用标识/help.html</h4> <p><strong>Ps：插件的所有配置应当全部存放在conf/应用标识/ 目录下，所有视图文件，应当存放在 view/应用标识/ 目录下，所有控制器，应当存放在 controller/应用标识/ 目录下！</strong></p> <h3 id="_2、插件目录结构"><a href="#_2、插件目录结构" class="header-anchor">#</a> 2、插件目录结构</h3> <div class="language- extra-class"><pre><code>应用存放目录：/includes/lib/soft/
</code></pre></div><div class="language- line-numbers-mode"><pre class="language-text"><code>/soft/
├── conf/应用标识/ 应用配置文件
├── controller/应用标识/ 应用控制器文件
├── view/应用标识/ 应用视图文件
.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="网站防cc插件实例文件结构（图示）："><a href="#网站防cc插件实例文件结构（图示）：" class="header-anchor">#</a> 网站防CC插件实例文件结构（图示）：</h4> <p><img src="http://assets.api.ln.cn/data/20200816/13/1597553922_0kLP9wxcW5PEgqSJ_QQ%E6%88%AA%E5%9B%BE20200816125744.png" alt="网站防CC插件实列1"> <img src="http://assets.api.ln.cn/data/20200816/13/1597553923_uGo2kTb78rhIwLeE_QQ%E6%88%AA%E5%9B%BE20200816125806.png" alt="网站防CC插件实列2"> <strong>压缩包为插件安装包。结构如上!</strong><br>
实列安装包可在下方SDK下载里面下载查看！</p> <h3 id="_3、控制器开发规范："><a href="#_3、控制器开发规范：" class="header-anchor">#</a> 3、控制器开发规范：</h3> <div class="language- extra-class"><pre><code>创建新文件：/includes/lib/soft/controller/应用标识/index.php

调用示例(接口调用方法)：?AppApies&amp;identification=应用标识&amp;name=我是内容  
</code></pre></div><div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">lib</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> 你设置的应用标识
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * @param array $Data
     * 控制器入口
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">origin</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$Data</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//在里面进行功能开发，必须严格遵循此规范！</span>
        <span class="token comment">//调用此应用时，传递的参数均在此处 $Data 函数内</span>
        <span class="token keyword">return</span> self<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Test</span><span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//打印：我是内容</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * 简单调用
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>这只是一个简单的例子，若需要完整实例可在此处下载：<a href="#sdk%E5%8F%8Ademo%E4%B8%8B%E8%BD%BD">SDK及DEOM下载</a></strong></p> <h3 id="_4、调用控制器方法"><a href="#_4、调用控制器方法" class="header-anchor">#</a> 4、调用控制器方法</h3> <p>调用方法有三种！<br>
1、<strong>全局调用</strong>：需达到2级开发者才可使用，访问站点任何地方均可调用控制器，传递当前所有的请求数据到控制器内，如防CC插件就是一个很好的全局调用例子，可在此处下载：<a href="#sdk%E5%8F%8Ademo%E4%B8%8B%E8%BD%BD">SDK及DEOM下载</a><br>
2、<strong>接口调用</strong>：任意等级开发者均可使用，通过请求指定的url链接调用控制器，调用例子：<br></p> <div class="language- extra-class"><pre><code>?AppApies&amp;identification=应用标识&amp;name=我是内容
</code></pre></div><p><br>以上请求可以将<strong>name=我是内容</strong>传递到了控制器的 <strong>$Data</strong> 内，如上所示 <a href="#_3%E3%80%81%E6%8E%A7%E5%88%B6%E5%99%A8%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%EF%BC%9A">查看</a><br>
3、<strong>钩子调用</strong>：用于开发特殊功能的应用，本系统内置了大量的钩子，可以通过给应用注册对应的钩子触发器来调用您开发的应用控制器，可以实现如打开首页时调用，创建新订单时调用，用户登陆时调用，用户提交工单时调用等！具体调用方法和注册方法可前往 <a href="#%E5%BA%94%E7%94%A8%E9%92%A9%E5%AD%90">应用钩子</a> 查看</p> <h3 id="_5、插件提审图示"><a href="#_5、插件提审图示" class="header-anchor">#</a> 5、插件提审图示</h3> <h4 id="_1、打开app或小程序，h5内的开放平台"><a href="#_1、打开app或小程序，h5内的开放平台" class="header-anchor">#</a> 1、打开APP或小程序，H5内的开放平台</h4> <p><img src="http://assets.api.ln.cn/data/20200816/13/1597554886_ODp1IH9HGbGNqnVO_IMG_20200816_130926.jpg" alt="打开开放平台"></p> <h4 id="_2、认证通过后，点击发布新品，如下图填写，填写完成后发布即可！"><a href="#_2、认证通过后，点击发布新品，如下图填写，填写完成后发布即可！" class="header-anchor">#</a> 2、认证通过后，点击发布新品，如下图填写，填写完成后发布即可！</h4> <p><img src="http://assets.api.ln.cn/data/20200816/13/1597555069_KQDz5e5VavLNBdjn_IMG_20200816_131304.jpg" alt="认证图示"> <strong>发布时填写规则请参考下方 <a href="#%E5%8F%91%E5%B8%83%E8%AF%B4%E6%98%8E">发布说明</a></strong></p> <h2 id="模板开发"><a href="#模板开发" class="header-anchor">#</a> 模板开发</h2> <h3 id="_1、模板开发须知"><a href="#_1、模板开发须知" class="header-anchor">#</a> 1、模板开发须知</h3> <h4 id="_1、模板开发难度较低，只需要开发者会一点前端知识即可开始着手开发，开发时需阅读：开放接口，根据本系统提供的开放接口实现对应的功能！"><a href="#_1、模板开发难度较低，只需要开发者会一点前端知识即可开始着手开发，开发时需阅读：开放接口，根据本系统提供的开放接口实现对应的功能！" class="header-anchor">#</a> 1、模板开发难度较低，只需要开发者会一点前端知识即可开始着手开发，开发时需阅读：<a href="/pages/exploit/" class="router-link-active">开放接口</a>，根据本系统提供的开放接口实现对应的功能！</h4> <h4 id="_2、你如果需要模板实现独立的功能，可以自写应用控制器，然后你的模板对接，可以实现很多功能，如拼团，砍价等，均可直接仿照插件开发模式进行开发，模板对接合并即可"><a href="#_2、你如果需要模板实现独立的功能，可以自写应用控制器，然后你的模板对接，可以实现很多功能，如拼团，砍价等，均可直接仿照插件开发模式进行开发，模板对接合并即可" class="header-anchor">#</a> 2、你如果需要模板实现独立的功能，可以自写应用控制器，然后你的模板对接，可以实现很多功能，如拼团，砍价等，均可直接仿照插件开发模式进行开发，模板对接合并即可</h4> <h4 id="_3、首页模板缓存问题，系统安装完成后站点编辑内的-首页数据缓存周期-默认是60秒，也就是说，每隔60秒才会加载一次新数据，如果是调试开发，建议直接设置1秒，如图所示！"><a href="#_3、首页模板缓存问题，系统安装完成后站点编辑内的-首页数据缓存周期-默认是60秒，也就是说，每隔60秒才会加载一次新数据，如果是调试开发，建议直接设置1秒，如图所示！" class="header-anchor">#</a> 3、首页模板缓存问题，系统安装完成后站点编辑内的 { 首页数据缓存周期 } 默认是60秒，也就是说，每隔60秒才会加载一次新数据，如果是调试开发，建议直接设置1秒，如图所示！</h4> <p><img src="http://assets.api.ln.cn/data/20200817/13/1597654203_hEaxwTMfxvxpBlgJ_QQ%E6%88%AA%E5%9B%BE20200817164744.png" alt="网站首页缓存"></p> <h3 id="_2、模板目录结构"><a href="#_2、模板目录结构" class="header-anchor">#</a> 2、模板目录结构</h3> <div class="language- extra-class"><pre><code>模板文件存放目录：/template/，所有的首页模板文件均存放于此

模板默认文件目录：/template/default/，若你选择的模板文件不存在，则会直接导向此目录
</code></pre></div><h4 id="模板安装包目录结构如下："><a href="#模板安装包目录结构如下：" class="header-anchor">#</a> 模板安装包目录结构如下：</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>/template/应用标识/index.php 模板入口文件,选择此模板后用户打开首页默认载入此文件
/template/应用标识/route.php 此为模板路由导航文件，用于适配各种模板的路由，必须存在此文件

如果你的模板需要控制面板，扩展功能的话，可以写一个控制器，实现扩展功能 ↓
/includes/lib/soft/controller/应用标识/help.html  创建帮助文档
/includes/lib/soft/conf/应用标识/index.php  创建控制器
/includes/lib/soft/view/应用标识/index.TP   创建操作面板
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3、模板提审规范"><a href="#_3、模板提审规范" class="header-anchor">#</a> 3、模板提审规范</h3> <h4 id="和插件规范差不多，只需要将类型切换为模板！"><a href="#和插件规范差不多，只需要将类型切换为模板！" class="header-anchor">#</a> 和插件规范差不多，只需要将类型切换为模板！</h4> <h4 id="提审时的安装路径直接填写："><a href="#提审时的安装路径直接填写：" class="header-anchor">#</a> 提审时的安装路径直接填写：/</h4> <p>可在下方<a href="#sdk%E5%8F%8Ademo%E4%B8%8B%E8%BD%BD">sdk及demo下载</a> 内下载简单的模板开发例子</p> <h3 id="_4、模板扩展方法"><a href="#_4、模板扩展方法" class="header-anchor">#</a> 4、模板扩展方法</h3> <p>本系统创建模板扩展有两种方法：<br>
1、<strong>插件式扩展</strong>：参考插件开发，实现开发模板时所需的接口，功能等，然后在你开发的模板内调用即可！<br>
2、<strong>内置式扩展</strong>：你只需要在模板安装包文件内，创建php文件，就可以通过下列方法调用这个文件，如果扩展文件不存在，则会在 <strong>/template/default/</strong> 目录下查找此文件，如果也没有，会返回文件不存在的提示！</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/template/应用标识/扩展文件.php 创建扩展文件

访问：/?mod=扩展文件名称  返回模板扩展文件内的内容，调用此文件的前提是已经在后台切换到这个模板哦！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="支付开发"><a href="#支付开发" class="header-anchor">#</a> 支付开发</h2> <h3 id="_1、支付开发须知"><a href="#_1、支付开发须知" class="header-anchor">#</a> 1、支付开发须知</h3> <h4 id="_1、支付接口应用本质上和插件开发差不多，只不过是加入了某些文件，必须按照某种规范来进行开发而已，阅读前可先阅读一遍-插件开发"><a href="#_1、支付接口应用本质上和插件开发差不多，只不过是加入了某些文件，必须按照某种规范来进行开发而已，阅读前可先阅读一遍-插件开发" class="header-anchor">#</a> 1、支付接口应用本质上和插件开发差不多，只不过是加入了某些文件，必须按照某种规范来进行开发而已，阅读前可先阅读一遍 <a href="#%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91">插件开发</a></h4> <h4 id="_2、您只需要按照sdk里面的例子进行开发即可，其他的统统不用操心"><a href="#_2、您只需要按照sdk里面的例子进行开发即可，其他的统统不用操心" class="header-anchor">#</a> 2、您只需要按照SDK里面的例子进行开发即可，其他的统统不用操心</h4> <h3 id="_2、支付开发规范"><a href="#_2、支付开发规范" class="header-anchor">#</a> 2、支付开发规范</h3> <h4 id="_1、控制器规范："><a href="#_1、控制器规范：" class="header-anchor">#</a> 1、控制器规范：</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">lib</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">lib<span class="token punctuation">\</span>AppStore<span class="token punctuation">\</span>AppList</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">lib<span class="token punctuation">\</span>Pay<span class="token punctuation">\</span>Pay</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Medoo<span class="token punctuation">\</span>DB<span class="token punctuation">\</span>SQL</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> 应用标识
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * @param array $Data
     * 控制器入口
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">origin</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$Data</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'typeS'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token comment">//获取付款地址</span>
                self<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">payment</span><span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'pid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token comment">//唤起支付</span>
                self<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">arouse</span><span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'pid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span> <span class="token comment">//异步通知</span>
                self<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">asynchronization</span><span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span> <span class="token comment">//同步通知</span>
                self<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">synchronization</span><span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @param $Pid 商品订单ID
     * 获取付款链接
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">payment</span><span class="token punctuation">(</span><span class="token variable">$Pid</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//返回支付链接，返回参数必须和下方保持一致！</span>
        <span class="token function">dier</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'code'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'msg'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'付款链接创建成功！'</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'url'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">is_https</span><span class="token punctuation">(</span><span class="token boolean constant">false</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token function">href</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'/?AppApies&amp;identification=应用标识&amp;pid='</span> <span class="token punctuation">.</span> <span class="token variable">$Pid</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'&amp;typeS=2'</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'pid'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$Pid</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 唤起支付
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">arouse</span><span class="token punctuation">(</span><span class="token variable">$Pid</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">global</span> <span class="token variable">$conf</span><span class="token punctuation">;</span>
        <span class="token variable">$DB</span> <span class="token operator">=</span> <span class="token constant">SQL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">DB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$Order</span> <span class="token operator">=</span> <span class="token variable">$DB</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'pay'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token variable">$Pid</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        @<span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Content-Type: text/html; charset=UTF-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$Order</span><span class="token punctuation">)</span> <span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'警告'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'支付Pid['</span> <span class="token punctuation">.</span> <span class="token variable">$Pid</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">']无对应支付订单,请直接关闭当前界面！'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$Order</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'state'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'恭喜'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'此订单已完成，若有漏单情况，可联系客服处理！'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token variable">$Order</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token single-quoted-string string">'qqpay'</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$conf</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'PayConQQ'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'警告'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'当前QQ支付通道未开启!'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token variable">$PayData</span> <span class="token operator">=</span> AppList<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">AppConf</span><span class="token punctuation">(</span><span class="token variable">$conf</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'PayConQQ'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'Data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token single-quoted-string string">'wxpay'</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$conf</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'PayConWX'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'警告'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'当前微信支付通道未开启!'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token variable">$PayData</span> <span class="token operator">=</span> AppList<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">AppConf</span><span class="token punctuation">(</span><span class="token variable">$conf</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'PayConWX'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'Data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token single-quoted-string string">'alipay'</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$conf</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'PayConZFB'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'警告'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'当前支付宝支付通道未开启!'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token variable">$PayData</span> <span class="token operator">=</span> AppList<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">AppConf</span><span class="token punctuation">(</span><span class="token variable">$conf</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'PayConZFB'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'Data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span>
                <span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'警告'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'当前选择的付款方式不存在!'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$PayData</span> <span class="token keyword">as</span> <span class="token variable">$v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$v</span> <span class="token operator">==</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">)</span> <span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'警告'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'此支付通道未配置完善,无法使用！'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">,</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/**
         * 写入异步回调日志
         */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$conf</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'userdomaintype'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'league'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token constant">ROOT</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'includes/extend/log/Order/'</span> <span class="token punctuation">.</span> <span class="token variable">$Order</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'order'</span><span class="token punctuation">]</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'.log'</span><span class="token punctuation">,</span> <span class="token function">xiaochu_de</span><span class="token punctuation">(</span><span class="token variable">$_COOKIE</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'league'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//执行支付跳转！</span>
        <span class="token comment">//$PayData = 当前用户所选支付接口信息</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @param $Order 订单号
     * 防止异步同步同时进行！
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">obstruct</span><span class="token punctuation">(</span><span class="token variable">$Order</span><span class="token punctuation">,</span> <span class="token variable">$Type</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$Flie</span> <span class="token operator">=</span> <span class="token constant">ROOT</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'/includes/extend/log/Astrict/OrderEpay_'</span> <span class="token punctuation">.</span> <span class="token variable">$Order</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'.log'</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">file_exists</span><span class="token punctuation">(</span><span class="token variable">$Flie</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$Type</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                @<span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Content-Type: text/html; charset=UTF-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'温馨提示'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'当前订单已经完成,若有漏单情况可联系客服处理,点击下方查看订单！'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/?mod=route&amp;p=Order'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> @<span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token variable">$Flie</span><span class="token punctuation">,</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 异步通知
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">asynchronization</span><span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        self<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">obstruct</span><span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'out_trade_no'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">global</span> <span class="token variable">$conf</span><span class="token punctuation">;</span>
        <span class="token comment">//此处编写异步回调规则</span>
        <span class="token comment">//需在此处理订单付款后的操作</span>
        <span class="token comment">/**
         *  $Order = 当前支付订单的信息
         *  $Data = [
         *      &quot;out_trade_no&quot;=&gt;&quot;本地支付订单号&quot;,
         *      &quot;trade_no&quot;=&gt;&quot;接口方支付订单号&quot;,
         *  ];
         *  $Data必须携带者out_trade_no和trade_no参数！
         */</span>
        <span class="token comment">//调用方法：Pay::PaySuccess($Order, $Data); 即可执行付款后操作</span>
        <span class="token comment">//仅可返回：success 或 fail ，成功或失败！</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 同步通知
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">synchronization</span><span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">/**
         * 同步暂停0.3秒防止和异步冲突！
         */</span>
        <span class="token function">usleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        self<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">obstruct</span><span class="token punctuation">(</span><span class="token variable">$Data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'out_trade_no'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">global</span> <span class="token variable">$conf</span><span class="token punctuation">;</span>

        <span class="token comment">//此处编写同步回调规则</span>
        <span class="token comment">//需在此处理订单付款后的操作</span>
        <span class="token comment">/**
         *  $Order = 当前支付订单的信息
         *  $Data = [
         *      &quot;out_trade_no&quot;=&gt;&quot;本地支付订单号&quot;,
         *      &quot;trade_no&quot;=&gt;&quot;接口方支付订单号&quot;,
         *  ];
         *  $Data必须携带者out_trade_no和trade_no参数！
         */</span>
        <span class="token comment">//调用方法：Pay::PaySuccess($Order, $Data); 即可执行付款后操作</span>
        <span class="token comment">//可返回：处理结果，如：show_msg('温馨提示', '订单已完成，请点击下方按钮继续！', 1, '/?mod=route&amp;p=Order');</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br></div></div><h4 id="_2、为你的支付应用在系统内注册！"><a href="#_2、为你的支付应用在系统内注册！" class="header-anchor">#</a> 2、为你的支付应用在系统内注册！</h4> <p><strong>系统是无法自动识别这个应用是不是支付应用的，您需要按照下方操作步骤为您的支付插件在系统内注册：</strong></p> <h5 id="第一步：创建配置文件"><a href="#第一步：创建配置文件" class="header-anchor">#</a> 第一步：创建配置文件</h5> <p>在你的应用 <strong>/conf/应用标识/</strong> 目录下创建 <strong>payconf.json</strong> 文件！<br>
和为插件注册钩子步骤差不多,只不过文件名称变成了 <strong>payconf.json</strong> ，如果没有这个文件，就判定为普通插件，无法在支付通道列表内选择！</p> <h5 id="第二步：编写配置文件（注释记得删除）"><a href="#第二步：编写配置文件（注释记得删除）" class="header-anchor">#</a> 第二步：编写配置文件（注释记得删除）</h5> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//格式如下</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1,1,1&quot;</span><span class="token punctuation">,</span> <span class="token comment">//顺序：QQ，微信，支付宝 | 参数： =1可用 ，=0不可用</span>
  <span class="token property">&quot;input&quot;</span><span class="token operator">:</span> <span class="token string">&quot;输入框1名称,输入框2名称,输入框3名称&quot;</span> 
  <span class="token comment">//输入框可以无限加,用户填写信息后，可在唤起支付方法内的 $PayData 里面读取信息</span>
<span class="token punctuation">}</span>

<span class="token comment">//支付宝当面付例子：</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0,0,1&quot;</span><span class="token punctuation">,</span> <span class="token comment">//只有支付宝可以使用</span>
  <span class="token property">&quot;input&quot;</span><span class="token operator">:</span> <span class="token string">&quot;商品自定义名称,支付宝公钥,商户私钥,应用ID&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment">//易支付例子：</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1,1,1&quot;</span><span class="token punctuation">,</span> <span class="token comment">//全部支付通道可用</span>
  <span class="token property">&quot;input&quot;</span><span class="token operator">:</span> <span class="token string">&quot;接口地址,商户ID,商户KEY&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="编辑完成后保存即可！"><a href="#编辑完成后保存即可！" class="header-anchor">#</a> 编辑完成后保存即可！</h4> <h3 id="_3、支付相关文件"><a href="#_3、支付相关文件" class="header-anchor">#</a> 3、支付相关文件</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>/includes/CallBack.php //支付回调接收地址
/includes/lib/Pay/Pay.php //支付总控类文件，所有支付有关的操作均在此处处理
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4、支付回调地址"><a href="#_4、支付回调地址" class="header-anchor">#</a> 4、支付回调地址</h3> <h4 id="异步回调地址填写："><a href="#异步回调地址填写：" class="header-anchor">#</a> 异步回调地址填写：</h4> <div class="language- extra-class"><pre><code>is_https(false) . href() . '/includes/CallBack.php?uis=3HsD应用标识';  //3HsD 代表异步
</code></pre></div><h4 id="同步回调地址填写："><a href="#同步回调地址填写：" class="header-anchor">#</a> 同步回调地址填写：</h4> <div class="language- extra-class"><pre><code>is_https(false) . href() . '/includes/CallBack.php?uis=4HsD应用标识';  //4HsD 代表同步
</code></pre></div><h4 id="需要用到的参数："><a href="#需要用到的参数：" class="header-anchor">#</a> 需要用到的参数：</h4> <div class="language- extra-class"><pre><code>is_https(false) . href() = http(s): //站点域名，加在回调地址前面即可
</code></pre></div><h3 id="_5、支付提审规范"><a href="#_5、支付提审规范" class="header-anchor">#</a> 5、支付提审规范</h3> <p>和插件提交审核的方法没什么不一样，其中内置验证选择：<strong>Home</strong>，调用方法选择<strong>接口调用</strong>即可！</p> <h2 id="内置方法"><a href="#内置方法" class="header-anchor">#</a> 内置方法</h2> <h3 id="相关说明"><a href="#相关说明" class="header-anchor">#</a> 相关说明</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>系统内置方法较多，目前无法给出完整方法列表，暂时只列出几个常用/实用的方法！</p></div> <h3 id="数据库操作："><a href="#数据库操作：" class="header-anchor">#</a> 数据库操作：</h3> <p>本系统目前有两种数据库操作类：<br></p> <h4 id="_1、-db类调用-半废弃状态-，执行原生sql语句-示例："><a href="#_1、-db类调用-半废弃状态-，执行原生sql语句-示例：" class="header-anchor">#</a> 1、$DB类调用(半废弃状态)，执行原生SQL语句,示例：</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">SQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">global</span> <span class="token variable">$DB</span><span class="token punctuation">;</span>
       <span class="token variable">$DB</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_row</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;SQL语句&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//用于单条数据查询！</span>
       <span class="token variable">$DB</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;SQL语句&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//可以执行增删改查SQL语句！</span>
       <span class="token variable">$DB</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;SQL语句&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//应用数据行数查询，数量查询等，count(*) sum(*)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_2、medoo数据库框架操作（pdo）-中文文档-，调用示例："><a href="#_2、medoo数据库框架操作（pdo）-中文文档-，调用示例：" class="header-anchor">#</a> 2、Medoo数据库框架操作（PDO）(<a href="https://medoo.lvtao.net/1.2/doc.php" target="_blank" rel="noopener noreferrer">中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)，调用示例：</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">Medoo<span class="token punctuation">\</span>DB<span class="token punctuation">\</span>SQL</span><span class="token punctuation">;</span> <span class="token comment">//引入Medoo框架</span>

<span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">SQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token variable">$DB</span> <span class="token operator">=</span> \<span class="token package">Medoo<span class="token punctuation">\</span>DB<span class="token punctuation">\</span>SQL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">DB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//习惯命名为$DB，可以自定义函数名</span>
       <span class="token comment">//简单操作演示</span>
       <span class="token variable">$Goods</span> <span class="token operator">=</span> <span class="token variable">$DB</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'goods'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'*'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'gid'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将商品ID=1的商品数据写入到 $Goods函数内</span>
       <span class="token variable">$GoodsArr</span> <span class="token operator">=</span> <span class="token variable">$DB</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'goods'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'*'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'state'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//取出state=1的商品列表。写入到 $GoodsArr 里面</span>
       <span class="token comment">//表名不需要填写前缀，sky_ 直接填写名称goods即可</span>
       <span class="token comment">//其他使用方法可以参考Medoo文档 https://medoo.lvtao.net/1.2/doc.php</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="字符串加密-解密"><a href="#字符串加密-解密" class="header-anchor">#</a> 字符串加密/解密</h3> <h4 id="_1、加密：xiaochu-en-待加密的字符串-解密key"><a href="#_1、加密：xiaochu-en-待加密的字符串-解密key" class="header-anchor">#</a> 1、加密：xiaochu_en(&quot;待加密的字符串&quot;,&quot;解密KEY&quot;);</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$a</span> <span class="token operator">=</span> <span class="token function">xiaochu_en</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;123456&quot;</span><span class="token punctuation">,</span><span class="token number">666</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获得加密后的字符串</span>
<span class="token keyword">return</span> <span class="token double-quoted-string string">&quot;加密后的字符串：&quot;</span><span class="token punctuation">.</span><span class="token variable">$a</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2、解码：xiaochu-de-待解码的字符串-解密key"><a href="#_2、解码：xiaochu-de-待解码的字符串-解密key" class="header-anchor">#</a> 2、解码：xiaochu_de(&quot;待解码的字符串&quot;,&quot;解密KEY&quot;);</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$b</span> <span class="token operator">=</span> <span class="token function">xiaochu_en</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;已经加密过的字符串&quot;</span><span class="token punctuation">,</span><span class="token number">666</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获得解码后的字符串</span>
<span class="token keyword">return</span> <span class="token double-quoted-string string">&quot;解密后的字符串：&quot;</span><span class="token punctuation">.</span><span class="token variable">$b</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="curl请求-post-get"><a href="#curl请求-post-get" class="header-anchor">#</a> Curl请求 POST/GET</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$DATA</span> <span class="token operator">=</span> <span class="token function">get_curl</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;URL&quot;</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;POST数据&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//基本上只会用到这两个参数</span>
<span class="token keyword">return</span> <span class="token variable">$DATA</span><span class="token punctuation">;</span> <span class="token comment">//打印出远程数据</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="常用全局函数"><a href="#常用全局函数" class="header-anchor">#</a> 常用全局函数</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code>
<span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">SQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">global</span> <span class="token variable">$_QET</span><span class="token punctuation">,</span><span class="token variable">$conf</span><span class="token punctuation">,</span><span class="token variable">$date</span><span class="token punctuation">,</span><span class="token variable">$ip</span><span class="token punctuation">,</span><span class="token variable">$mid_arr</span><span class="token punctuation">;</span>
       <span class="token variable">$_QET</span><span class="token punctuation">;</span> <span class="token comment">//可以打印出$_GET,$_POST,$_FILES 内的数据，可以过滤掉用户的恶意请求</span>
       <span class="token variable">$conf</span><span class="token punctuation">;</span> <span class="token comment">//可以打印出站点全局配置数据,详细可查看 includes/fun.test.php 文件内config_verify方法</span>
       <span class="token variable">$date</span><span class="token punctuation">;</span> <span class="token comment">//打印出当前时间如：2020-07-05 20:28:42</span>
       <span class="token variable">$ip</span><span class="token punctuation">;</span> <span class="token comment">//打印出当前访问用户的IP地址</span>
       <span class="token variable">$mid_arr</span><span class="token punctuation">;</span> <span class="token comment">//打印出当前站点配置的用户等级列表数据！</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="返回提示信息"><a href="#返回提示信息" class="header-anchor">#</a> 返回提示信息</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">//此方法是全局方法,和die,exit 函数差不多</span>
<span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;提示框标题&quot;</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;提示内容&quot;</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;1=成功,2=注意,3=普通,4=警告&quot;</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;跳转链接,留空返回上一步&quot;</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;=false不显示按钮&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//演示</span>
<span class="token function">show_msg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'温馨提示'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'没什么好说的！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="返回json格式提示信息"><a href="#返回json格式提示信息" class="header-anchor">#</a> 返回JSON格式提示信息</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code>
<span class="token function">dies</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">666</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//= die(json_encode(['code' =&gt; 1, 'msg' =&gt; 666]));</span>

<span class="token function">dier</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'code'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'msg'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'恭喜，ID获取成功'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//= die(json_encode(['code'=&gt;1, 'msg'=&gt;'恭喜，ID获取成功']));</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="获取用户的登陆状态"><a href="#获取用户的登陆状态" class="header-anchor">#</a> 获取用户的登陆状态</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token variable">$User</span> <span class="token operator">=</span> login_data<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这是全局方法，随时随地都可以调用</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$User</span><span class="token operator">==</span><span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token single-quoted-string string">'未登录'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token single-quoted-string string">'已登陆,$User已经写入当前登陆用户的信息'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="发布说明"><a href="#发布说明" class="header-anchor">#</a> 发布说明</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>应用开发完成后，可根据下方填写帮助来进行填写！<br>注意：提审的应用必须为未加密状态，如果需要给应用里面的文件加密(仅限插件)，可联系开发者交流群内的管理员，告诉他有哪些文件是需要加密的，应用审核完成后，会帮您应用的指定文件进行加密处理！</strong></p></div> <h3 id="_1、发布模式"><a href="#_1、发布模式" class="header-anchor">#</a> 1、发布模式</h3> <p>发布模式分为两种<br>
1、<font color="red">审核模式</font>，选择审核模式时发布会将应用设置为审核状态，审核员在后台可以看到你提审的应用，审核通过后，应用会在应用商店内显示！<br>
2、<font color="red">沙盒模式</font>，选择沙盒模式时，应用会进入沙盒状态，发布者可在自己的网站后台，应用商店/我的/沙盒测试 里面找到自己的应用，用于应用调试开发</p> <h3 id="_2、应用类型"><a href="#_2、应用类型" class="header-anchor">#</a> 2、应用类型</h3> <p>应用类型也分为两种，用于应用商店内的分类，一种是<font color="red">插件类</font>，一种是<font color="red">模板类</font></p> <h3 id="_3、内置验证类型"><a href="#_3、内置验证类型" class="header-anchor">#</a> 3、内置验证类型</h3> <p>应用内置验证类型分为三种：<br>
1、<font color="red">Admin</font>，此应用只可可以在主站登陆状态下打开，调用<br>
2、<font color="red">User</font>，此应用只可在用户登陆状态下打开，调用<br>
3、<font color="red">Home</font>，此应用可在任何情况下打开，无任何限制！<br>
具体选择哪一个，需要你根据实际情况自行选择，或可以自写验证，进行开发</p> <h3 id="_4、应用内置调用方式"><a href="#_4、应用内置调用方式" class="header-anchor">#</a> 4、应用内置调用方式</h3> <p>内置应用调用模式有两种：<br>
1、<font color="red">全局调用</font>，此调用方法只可使用Home内置验证模式，选择此模式的应用会在每次打开网站时执行控制器里面的方法，可用做请求拦截等，网站防CC插件是一个很好的全局调用例子<br>
2、<font color="red">接口调用</font>，此调用方法一般用于应用设置等，调用方法：<strong>?AppApies&amp;identification=应用标识&amp;xxx=xxx(xxx为自定义参数！)</strong> 自定义参数可以传递到对应应用的控制器内，可以通过传递的参数来执行对应的方法！</p> <h3 id="_5、应用唯一标识"><a href="#_5、应用唯一标识" class="header-anchor">#</a> 5、应用唯一标识</h3> <p>应用标识是唯一的，你可以自由创建，创建之后无法修改，由英文数字组成，您的应用文件目录组成必须和应用标识对应，如插件可以参考<a href="#_2%E3%80%81%E6%8F%92%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">插件目录结构</a>，如果是模板的话，则模板目录名称必须为应用标识！否则无法通过审核，直接驳回！</p> <h3 id="_6-、应用名称"><a href="#_6-、应用名称" class="header-anchor">#</a> 6 、应用名称</h3> <p>顾名思义，应用的名称，记得起好听点，虽然可以换，但是发布后换有点麻烦哦</p> <h3 id="_7、应用图标路径"><a href="#_7、应用图标路径" class="header-anchor">#</a> 7、应用图标路径</h3> <p>应用图标外链必须使用 官方云存储空间，否则无法提审哦，空间地址：<a href="http://cdn.vue8.cn" target="_blank" rel="noopener noreferrer">进入 http://cdn.vue8.cn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_8、购买等级限制"><a href="#_8、购买等级限制" class="header-anchor">#</a> 8、购买等级限制</h3> <p>顾名思义，用户达到指定等级才可购买你发布的应用！</p> <h3 id="_9、安装路径"><a href="#_9、安装路径" class="header-anchor">#</a> 9、安装路径</h3> <p>安装路径可以根据你安装包内的文件内容来决定，如直接填写:<strong>/</strong>  安装应用后会直接将安装包解压到根目录！，填写：<strong>includes/lib/soft/</strong> 会解压到 <strong>soft</strong> 目录内！</p> <h3 id="_10、购买应用30天的价格"><a href="#_10、购买应用30天的价格" class="header-anchor">#</a> 10、购买应用30天的价格</h3> <p>应用售价，每次购买可用30天，到期后无法使用，发布者购买应用不扣款，发布者可在后台设置折扣率！，0=免费</p> <h3 id="_11、应用文件下载链接"><a href="#_11、应用文件下载链接" class="header-anchor">#</a> 11、应用文件下载链接</h3> <p>应用文件外链必须使用 官方云存储空间，否则无法提审哦，空间地址：<a href="http://cdn.vue8.cn" target="_blank" rel="noopener noreferrer">进入 http://cdn.vue8.cn<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <br> <strong>安装包格式必须为ZIP，否则直接审核失败！</strong></p> <h3 id="_12、可用客户端版本"><a href="#_12、可用客户端版本" class="header-anchor">#</a> 12、可用客户端版本</h3> <p>目前V1.9+版本有三种填写模式<br> <strong>1、all，全版本客户端可用！<br>
2、填写最低可用客户端版本号，如V1.92，则低于此版本的客户端均无法安装发布的应用！<br>
3、填写最低可用版本和最高可用版本，如V1.7,V1.9,则此应用只可以在1.7版本到1.9版本之间的客户端安装,用英文逗号分割，提交应用时会自动验证！</strong></p> <h3 id="_13、应用简介"><a href="#_13、应用简介" class="header-anchor">#</a> 13、应用简介</h3> <p>3、用于介绍你发布应用！，用户点击应用详情时可看到！</p> <h2 id="输入验证"><a href="#输入验证" class="header-anchor">#</a> 输入验证</h2> <h4 id="规则介绍"><a href="#规则介绍" class="header-anchor">#</a> 规则介绍</h4> <p><strong>问：匹配字段如何填写,有什么作用？</strong><br>
答：匹配字段可填写多个，中间用 | 符号分割，作用是匹配下单输入框的名称，如果匹配字段和输入框的名称对应，则会显示对应功能，按钮，提示等，可以根据需求开发对应的插件！<br> <strong>问：匹配规则文件存储在哪里？</strong><br>
答：存储路径：<strong>includes/lib/rule/rule.php</strong> 如有需要可手动进行编写！<br> <strong>问：传值内容怎么选择，有什么区别？</strong><br>
答：传值内容分为两种，一种是单输入框提交，只将当前匹配成功的输入框内容提交至指定接口！，另外一种是多输入框提交，会一次提交全部输入框内容，便于开发者调整！<br></p> <h4 id="自定义api注意事项"><a href="#自定义api注意事项" class="header-anchor">#</a> 自定义API注意事项</h4> <p>如果想要调用本站内置接口，自定义接口必须在前面加上[url],[url] = 当前站点链接，否则会访问失败哦！<br> <strong>另外你的自定义接口是处于暴露状态，需自行做中转，防止接口核心数据外泄！</strong></p> <h4 id="includes-lib-rule-rule-php文件内的规则参数注解："><a href="#includes-lib-rule-rule-php文件内的规则参数注解：" class="header-anchor">#</a> includes/lib/rule/rule.php文件内的规则参数注解：</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>'name' =&gt; '点我一下', //按钮名称
'type' =&gt; -1|1, //-1自定义远程数据接口，1收货地址
'url' =&gt; 'http://baidu.com', //自定义接口调用地址
'way' =&gt; 1|2, //1:提交单输入框的值，2:提交全部输入框的值
'placeholder' =&gt; '请将下单信息填写完整！', //匹配成功的输入框提示信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="提交参数说明"><a href="#提交参数说明" class="header-anchor">#</a> 提交参数说明</h4> <p>当<strong>way</strong>参数=1时，点击按钮接口会收到如下参数：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>value：当前按钮输入框的值
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当<strong>way</strong>参数=2时，点击按钮接口会收到如下参数：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>value0：对应输入框1
value1：对应输入框2
value2：对应输入框3
value3：对应输入框4
...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="当way-1时，你的自定义接口必须返回如下参数："><a href="#当way-1时，你的自定义接口必须返回如下参数：" class="header-anchor">#</a> 当<strong>way</strong>=1时，你的自定义接口必须返回如下参数：</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>'code' =&gt; '1', //返回判断参数&gt;=0为成功
'msg' =&gt; 'xxxx', //提示信息,用户可看到，支持html代码
'value' =&gt; 'xxxx',  //此参数内容会替换掉当前输入框的值
'js'=&gt;'js代码'; //可有可无，用于补缺，提示后的确认按钮触发
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="当way-2时，你的自定义接口必须返回如下参数："><a href="#当way-2时，你的自定义接口必须返回如下参数：" class="header-anchor">#</a> 当<strong>way</strong>=2时，你的自定义接口必须返回如下参数：</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>'code' =&gt; '1', //返回判断参数&gt;=0为成功
'msg' =&gt; 'xxxx', //提示信息,用户可看到，支持html代码
'data' =&gt; ['输入框1','输入框2','输入框3'],  //此参数内容会替换掉全部输入框的值,按需修改即可！
'js'=&gt;'js代码'; //可有可无，用于补缺，提示后的确认按钮触发
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="添加新规则的方法"><a href="#添加新规则的方法" class="header-anchor">#</a> 添加新规则的方法</h4> <h5 id="_1、登陆站长后台"><a href="#_1、登陆站长后台" class="header-anchor">#</a> 1、登陆站长后台</h5> <h5 id="_2、打开-便捷模块-输入验证"><a href="#_2、打开-便捷模块-输入验证" class="header-anchor">#</a> 2、打开 便捷模块/输入验证</h5> <h5 id="_3、点击新增规则按钮，按需填写！"><a href="#_3、点击新增规则按钮，按需填写！" class="header-anchor">#</a> 3、点击新增规则按钮，按需填写！</h5> <p><img src="http://assets.api.ln.cn/data/20200817/13/1597642205_kNhJt3B1pJbjp4a0_QQ%E6%88%AA%E5%9B%BE20200817132939.png" alt="图片演示"></p> <h2 id="应用钩子"><a href="#应用钩子" class="header-anchor">#</a> 应用钩子</h2> <h3 id="钩子相关介绍"><a href="#钩子相关介绍" class="header-anchor">#</a> 钩子相关介绍</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>钩子的作用很简单，就是在用户<strong>执行某一操作</strong>时，触发已经在此操作相关钩子内注册的应用，传递对应的参数到指定控制器内，完成某种特定的操作，可以将本程序的钩子理解成
程序里面的触发器，用户执行某种操作就会触发对应的触发器！<br>
简单的打个比方，用户<strong>评价</strong>了商品，就会触发钩子：<strong>AppraiseNew</strong>，凡是在<strong>AppraiseNew</strong>钩子内<strong>注册的应用</strong>均会执行一遍!,执行时会将<strong>当前评价相关详细信息</strong>传递到注册过此钩子的应用控制器内，应用可以通过对应数据执行对应的操作！</p></div> <h3 id="_1、钩子大全-按需新增中，可在开发者交流群提需"><a href="#_1、钩子大全-按需新增中，可在开发者交流群提需" class="header-anchor">#</a> 1、钩子大全(按需新增中，可在开发者交流群提需)</h3> <h4 id="orderadd-创建新的待处理订单触发（传递订单完整信息，此处是未成功发货的订单信息）"><a href="#orderadd-创建新的待处理订单触发（传递订单完整信息，此处是未成功发货的订单信息）" class="header-anchor">#</a> OrderAdd  创建新的待处理订单触发（传递订单完整信息，此处是未成功发货的订单信息）</h4> <h4 id="orderfinish-订单完成后触发（传递订单完整信息，包含订单处理结果）"><a href="#orderfinish-订单完成后触发（传递订单完整信息，包含订单处理结果）" class="header-anchor">#</a> OrderFinish  订单完成后触发（传递订单完整信息，包含订单处理结果）</h4> <h4 id="goodsadd-创建商品触发（传递商品完整数据）"><a href="#goodsadd-创建商品触发（传递商品完整数据）" class="header-anchor">#</a> GoodsAdd 创建商品触发（传递商品完整数据）</h4> <h4 id="goodsset-修改商品触发（传递商品完整数据）"><a href="#goodsset-修改商品触发（传递商品完整数据）" class="header-anchor">#</a> GoodsSet 修改商品触发（传递商品完整数据）</h4> <h4 id="goodsshow-商品显示时触发（传递当前商品id）"><a href="#goodsshow-商品显示时触发（传递当前商品id）" class="header-anchor">#</a> GoodsShow 商品显示时触发（传递当前商品id）</h4> <h4 id="goodshide-商品掩藏时触发（传递当前商品id）"><a href="#goodshide-商品掩藏时触发（传递当前商品id）" class="header-anchor">#</a> GoodsHide 商品掩藏时触发（传递当前商品id）</h4> <h4 id="classadd-创建分类触发-（传递分类完整数据）"><a href="#classadd-创建分类触发-（传递分类完整数据）" class="header-anchor">#</a> ClassAdd 创建分类触发 （传递分类完整数据）</h4> <h4 id="classshow-分类显示时触发-传递当前分类的信息"><a href="#classshow-分类显示时触发-传递当前分类的信息" class="header-anchor">#</a> ClassShow 分类显示时触发 (传递当前分类的信息)</h4> <h4 id="classhide-分类掩藏时触发-传递当前分类的信息"><a href="#classhide-分类掩藏时触发-传递当前分类的信息" class="header-anchor">#</a> ClassHide 分类掩藏时触发 (传递当前分类的信息)</h4> <h4 id="apisubmit-api商品对接之前触发（传递订单信息-接口地址-向api接口的提交信息）"><a href="#apisubmit-api商品对接之前触发（传递订单信息-接口地址-向api接口的提交信息）" class="header-anchor">#</a> ApiSubmit Api商品对接之前触发（传递订单信息+接口地址+向api接口的提交信息）</h4> <h4 id="apifinish-api商品对接之后触发（传递订单信息-接口地址-api接口返回的信息）"><a href="#apifinish-api商品对接之后触发（传递订单信息-接口地址-api接口返回的信息）" class="header-anchor">#</a> ApiFinish Api商品对接之后触发（传递订单信息+接口地址+api接口返回的信息）</h4> <h4 id="fakalater-发卡商品刚验证完库存后触发，此时尚未修改库存内的卡密状态，尚未执行orderfinish钩子（传递订单信息-即将发卡的卡号-可做拦截器-发送邮件卡密等）"><a href="#fakalater-发卡商品刚验证完库存后触发，此时尚未修改库存内的卡密状态，尚未执行orderfinish钩子（传递订单信息-即将发卡的卡号-可做拦截器-发送邮件卡密等）" class="header-anchor">#</a> FakaLater 发卡商品刚验证完库存后触发，此时尚未修改库存内的卡密状态，尚未执行OrderFinish钩子（传递订单信息+即将发卡的卡号,可做拦截器,发送邮件卡密等）</h4> <h4 id="jiuwusubmit-玖伍商品对接之前触发（传递订单信息-接口地址-除了账号密码外的提交信息）"><a href="#jiuwusubmit-玖伍商品对接之前触发（传递订单信息-接口地址-除了账号密码外的提交信息）" class="header-anchor">#</a> JiuwuSubmit 玖伍商品对接之前触发（传递订单信息+接口地址+除了账号密码外的提交信息）</h4> <h4 id="jiuwufinish-玖伍商品对接之后触发（传递订单信息-接口地址-对接玖伍货源的返回信息，已经对数据进行过一次处理）"><a href="#jiuwufinish-玖伍商品对接之后触发（传递订单信息-接口地址-对接玖伍货源的返回信息，已经对数据进行过一次处理）" class="header-anchor">#</a> JiuwuFinish 玖伍商品对接之后触发（传递订单信息+接口地址+对接玖伍货源的返回信息，已经对数据进行过一次处理）</h4> <h4 id="kayixsubmit-卡易信商品对接之前触发（传递订单信息-接口地址-除了账号密码外的提交信息）"><a href="#kayixsubmit-卡易信商品对接之前触发（传递订单信息-接口地址-除了账号密码外的提交信息）" class="header-anchor">#</a> KayixSubmit 卡易信商品对接之前触发（传递订单信息+接口地址+除了账号密码外的提交信息）</h4> <h4 id="kayixfinish-卡易信商品对接之后触发（传递订单信息-接口地址-已经转换后的返回数据）"><a href="#kayixfinish-卡易信商品对接之后触发（传递订单信息-接口地址-已经转换后的返回数据）" class="header-anchor">#</a> KayixFinish 卡易信商品对接之后触发（传递订单信息+接口地址+已经转换后的返回数据）</h4> <h4 id="xiaochusubmit-小储商品对接之前触发（传递订单信息-接口地址-除了账号密码外的提交信息）"><a href="#xiaochusubmit-小储商品对接之前触发（传递订单信息-接口地址-除了账号密码外的提交信息）" class="header-anchor">#</a> XiaochuSubmit 小储商品对接之前触发（传递订单信息+接口地址+除了账号密码外的提交信息）</h4> <h4 id="xiaochufinish-小储商品对接之后触发（传递订单信息-接口地址-已经转换后的返回数据）"><a href="#xiaochufinish-小储商品对接之后触发（传递订单信息-接口地址-已经转换后的返回数据）" class="header-anchor">#</a> XiaochuFinish 小储商品对接之后触发（传递订单信息+接口地址+已经转换后的返回数据）</h4> <h4 id="yilesubmit-亿乐商品对接之前触发（传递订单信息-接口地址-除了账号密码外的提交信息）"><a href="#yilesubmit-亿乐商品对接之前触发（传递订单信息-接口地址-除了账号密码外的提交信息）" class="header-anchor">#</a> YileSubmit 亿乐商品对接之前触发（传递订单信息+接口地址+除了账号密码外的提交信息）</h4> <h4 id="yilefinish-亿乐商品对接之后触发（传递订单信息-接口地址-已经转换后的返回数据）"><a href="#yilefinish-亿乐商品对接之后触发（传递订单信息-接口地址-已经转换后的返回数据）" class="header-anchor">#</a> YileFinish 亿乐商品对接之后触发（传递订单信息+接口地址+已经转换后的返回数据）</h4> <h4 id="goodslist-读取商品列表时触发-（传递当前列表的分类id-当前用户的id，如果id-1，则是游客状态）"><a href="#goodslist-读取商品列表时触发-（传递当前列表的分类id-当前用户的id，如果id-1，则是游客状态）" class="header-anchor">#</a> GoodsList 读取商品列表时触发 （传递当前列表的分类ID+当前用户的ID，如果ID=-1，则是游客状态）</h4> <h4 id="visithome-用户访问商城首页时触发（仅访问首页时触发，无任何数据传递-若要获取ip可自行在控制器内获取）"><a href="#visithome-用户访问商城首页时触发（仅访问首页时触发，无任何数据传递-若要获取ip可自行在控制器内获取）" class="header-anchor">#</a> VisitHome 用户访问商城首页时触发（仅访问首页时触发，无任何数据传递,若要获取IP可自行在控制器内获取）</h4> <h4 id="visitmod-用户访问前台扩展时触发（访问扩展路由时触发-可做请求拦截，载入自定义界面！）"><a href="#visitmod-用户访问前台扩展时触发（访问扩展路由时触发-可做请求拦截，载入自定义界面！）" class="header-anchor">#</a> VisitMod 用户访问前台扩展时触发（访问扩展路由时触发,可做请求拦截，载入自定义界面！）</h4> <h4 id="visituser-用户访问用户后台时触发（访问用户后台时触发，这是用户后台全局参数，可做界面请求拦截，传递界面请求数据，仅在登陆成功时有效）"><a href="#visituser-用户访问用户后台时触发（访问用户后台时触发，这是用户后台全局参数，可做界面请求拦截，传递界面请求数据，仅在登陆成功时有效）" class="header-anchor">#</a> VisitUser 用户访问用户后台时触发（访问用户后台时触发，这是用户后台全局参数，可做界面请求拦截，传递界面请求数据，仅在登陆成功时有效）</h4> <h4 id="visitadmin-用户访问站长后台时触发（访问站长后台时触发，这是站长后台全局参数，可做界面请求拦截，传递界面请求数据，仅在登陆成功时有效）"><a href="#visitadmin-用户访问站长后台时触发（访问站长后台时触发，这是站长后台全局参数，可做界面请求拦截，传递界面请求数据，仅在登陆成功时有效）" class="header-anchor">#</a> VisitAdmin 用户访问站长后台时触发（访问站长后台时触发，这是站长后台全局参数，可做界面请求拦截，传递界面请求数据，仅在登陆成功时有效）</h4> <h4 id="withdrawnew-用户发起提现时触发-（传递提现信息）"><a href="#withdrawnew-用户发起提现时触发-（传递提现信息）" class="header-anchor">#</a> WithdrawNew 用户发起提现时触发 （传递提现信息）</h4> <h4 id="withdrawaudit-站长审核提现时触发-（传递处理结果，每次处理提现都是直接处理掉当前用户下所有的提现订单！）"><a href="#withdrawaudit-站长审核提现时触发-（传递处理结果，每次处理提现都是直接处理掉当前用户下所有的提现订单！）" class="header-anchor">#</a> WithdrawAudit 站长审核提现时触发 （传递处理结果，每次处理提现都是直接处理掉当前用户下所有的提现订单！）</h4> <h4 id="appraisenew-用户评价订单时触发-（传递当前评价相关详细信息）"><a href="#appraisenew-用户评价订单时触发-（传递当前评价相关详细信息）" class="header-anchor">#</a> AppraiseNew 用户评价订单时触发 （传递当前评价相关详细信息）</h4> <h4 id="appraiseaudit-用户评价审核时触发-（传递评价的id-处理结果）"><a href="#appraiseaudit-用户评价审核时触发-（传递评价的id-处理结果）" class="header-anchor">#</a> AppraiseAudit 用户评价审核时触发 （传递评价的ID+处理结果）</h4> <h4 id="userlogin-用户登陆时触发（传递当前登陆用户的id-用户名）"><a href="#userlogin-用户登陆时触发（传递当前登陆用户的id-用户名）" class="header-anchor">#</a> UserLogin 用户登陆时触发（传递当前登陆用户的ID+用户名）</h4> <h4 id="userlogout-用户注销时触发-（传递当前登陆用户的id-用户名）"><a href="#userlogout-用户注销时触发-（传递当前登陆用户的id-用户名）" class="header-anchor">#</a> UserLogout 用户注销时触发 （传递当前登陆用户的ID+用户名）</h4> <h4 id="userregister-用户注册时触发（传递当前注册用户的id-用户名））"><a href="#userregister-用户注册时触发（传递当前注册用户的id-用户名））" class="header-anchor">#</a> UserRegister 用户注册时触发（传递当前注册用户的ID+用户名））</h4> <h4 id="cartadd-购物车新增时触发（传递添加到购物车内的下单信息）"><a href="#cartadd-购物车新增时触发（传递添加到购物车内的下单信息）" class="header-anchor">#</a> CartAdd 购物车新增时触发（传递添加到购物车内的下单信息）</h4> <h4 id="cartdel-购物车删除时触发（传递购物车id-移除后的购物车商品列表信息）"><a href="#cartdel-购物车删除时触发（传递购物车id-移除后的购物车商品列表信息）" class="header-anchor">#</a> CartDel 购物车删除时触发（传递购物车id+移除后的购物车商品列表信息）</h4> <h4 id="confirmreceipt-订单确认收货时触发（传递完整的收货订单信息）"><a href="#confirmreceipt-订单确认收货时触发（传递完整的收货订单信息）" class="header-anchor">#</a> ConfirmReceipt 订单确认收货时触发（传递完整的收货订单信息）</h4> <h4 id="shareposter-创建商品海报图之前触发（传递要创建海报图的商品id，可做请求拦截，返回自定义海报图片）"><a href="#shareposter-创建商品海报图之前触发（传递要创建海报图的商品id，可做请求拦截，返回自定义海报图片）" class="header-anchor">#</a> SharePoster 创建商品海报图之前触发（传递要创建海报图的商品ID，可做请求拦截，返回自定义海报图片）</h4> <h4 id="guessyoulike-获取推荐商品时触发（传递页码信息，如果是在商品详情页内打开的，会传递商品id，用作商品推荐排除！）"><a href="#guessyoulike-获取推荐商品时触发（传递页码信息，如果是在商品详情页内打开的，会传递商品id，用作商品推荐排除！）" class="header-anchor">#</a> GuessYouLike 获取推荐商品时触发（传递页码信息，如果是在商品详情页内打开的，会传递商品ID，用作商品推荐排除！）</h4> <h4 id="paymoney-余额付款成功时触发（传递付款原因，用户id，金额）"><a href="#paymoney-余额付款成功时触发（传递付款原因，用户id，金额）" class="header-anchor">#</a> PayMoney 余额付款成功时触发（传递付款原因，用户ID，金额）</h4> <h4 id="paypoints-积分兑换成功时触发（传递兑换原因，用户id，积分消耗数量）"><a href="#paypoints-积分兑换成功时触发（传递兑换原因，用户id，积分消耗数量）" class="header-anchor">#</a> PayPoints 积分兑换成功时触发（传递兑换原因，用户ID，积分消耗数量）</h4> <h4 id="paysuccess-在线付款成功时触发（传递支付订单信息）"><a href="#paysuccess-在线付款成功时触发（传递支付订单信息）" class="header-anchor">#</a> PaySuccess 在线付款成功时触发（传递支付订单信息）</h4> <h4 id="goodsdetails-商品被打开时触发-如访问商品详情页-（传递商品id-用户id，如果id-1，则是游客状态）"><a href="#goodsdetails-商品被打开时触发-如访问商品详情页-（传递商品id-用户id，如果id-1，则是游客状态）" class="header-anchor">#</a> GoodsDetails 商品被打开时触发(如访问商品详情页)（传递商品ID+用户ID，如果ID=-1，则是游客状态）</h4> <h4 id="goodsseek-搜索商品时触发（传递搜索内容-用户id，如果id-1，则是游客状态）"><a href="#goodsseek-搜索商品时触发（传递搜索内容-用户id，如果id-1，则是游客状态）" class="header-anchor">#</a> GoodsSeek 搜索商品时触发（传递搜索内容+用户ID，如果ID=-1，则是游客状态）</h4> <h4 id="articlelist-查看文章列表时触发（传递用户id，如果id-1，则是游客状态）"><a href="#articlelist-查看文章列表时触发（传递用户id，如果id-1，则是游客状态）" class="header-anchor">#</a> ArticleList 查看文章列表时触发（传递用户ID，如果ID=-1，则是游客状态）</h4> <h4 id="usersignin-用户签到时触发（传递签到奖励数量-用户id）"><a href="#usersignin-用户签到时触发（传递签到奖励数量-用户id）" class="header-anchor">#</a> UserSignIn 用户签到时触发（传递签到奖励数量+用户ID）</h4> <h4 id="userinvite-用户邀请成功时触发-（传递用户id-被邀请用户的id-奖励数量）"><a href="#userinvite-用户邀请成功时触发-（传递用户id-被邀请用户的id-奖励数量）" class="header-anchor">#</a> UserInvite 用户邀请成功时触发 （传递用户ID+被邀请用户的ID+奖励数量）</h4> <h4 id="workordernew-用户创建工单时触发（传递工单完整信息）"><a href="#workordernew-用户创建工单时触发（传递工单完整信息）" class="header-anchor">#</a> WorkOrderNew 用户创建工单时触发（传递工单完整信息）</h4> <h4 id="workorderreply-回复工单-客服-用户-（传递工单id-回复内容-身份）"><a href="#workorderreply-回复工单-客服-用户-（传递工单id-回复内容-身份）" class="header-anchor">#</a> WorkOrderReply 回复工单[客服/用户] （传递工单ID+回复内容+身份）</h4> <h4 id="workorderend-完结工单时触发（传递关闭的工单id-操作者身份）"><a href="#workorderend-完结工单时触发（传递关闭的工单id-操作者身份）" class="header-anchor">#</a> WorkOrderEnd 完结工单时触发（传递关闭的工单ID+操作者身份）</h4> <h4 id="userlevelup-用户等级提升时触发（传递用户id，消耗金额，升级后的等级）"><a href="#userlevelup-用户等级提升时触发（传递用户id，消耗金额，升级后的等级）" class="header-anchor">#</a> UserLevelUp 用户等级提升时触发（传递用户ID，消耗金额，升级后的等级）</h4> <h4 id="articleseek-搜索指定文章时触发（传递搜索内容-用户id，如果id-1，则是游客状态）"><a href="#articleseek-搜索指定文章时触发（传递搜索内容-用户id，如果id-1，则是游客状态）" class="header-anchor">#</a> ArticleSeek 搜索指定文章时触发（传递搜索内容+用户ID，如果ID=-1，则是游客状态）</h4> <h4 id="orderdetails-打开订单详情时触发（传递商品id-用户id，如果id-1，则是游客状态）"><a href="#orderdetails-打开订单详情时触发（传递商品id-用户id，如果id-1，则是游客状态）" class="header-anchor">#</a> OrderDetails 打开订单详情时触发（传递商品ID+用户ID，如果ID=-1，则是游客状态）</h4> <h4 id="globals-全局钩子-拦截所有访问请求，此钩子太过于危险，2级开发者可在提交应用时开启，需审核，无需配置钩子调用json文件"><a href="#globals-全局钩子-拦截所有访问请求，此钩子太过于危险，2级开发者可在提交应用时开启，需审核，无需配置钩子调用json文件" class="header-anchor">#</a> Globals 全局钩子,拦截所有访问请求，此钩子太过于危险，2级开发者可在提交应用时开启，需审核，无需配置钩子调用json文件</h4> <h3 id="_2、为你的应用注册指定的钩子"><a href="#_2、为你的应用注册指定的钩子" class="header-anchor">#</a> 2、为你的应用注册指定的钩子</h3> <h4 id="_1、在你的应用-conf-应用标识-目录下创建hook-json-文件！"><a href="#_1、在你的应用-conf-应用标识-目录下创建hook-json-文件！" class="header-anchor">#</a> 1、在你的应用 /conf/应用标识/ 目录下创建Hook.json 文件！</h4> <h4 id="_2、编写hook-json文件，格式如下："><a href="#_2、编写hook-json文件，格式如下：" class="header-anchor">#</a> 2、编写Hook.json文件，格式如下：</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token string">&quot;钩子1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;钩子2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;钩子3&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>里面的钩子1，钩子2，钩子3替换为上方钩子大全内的钩子如 [&quot;WorkOrderNew&quot;,&quot;UserSignIn&quot;] ，需要什么就添加什么，无上限，安装应用后，用户触发钩子时会传递对应的数据到你应用的控制器内！</strong></p> <h4 id="_3、区分应用是通过哪个钩子触发的方法！"><a href="#_3、区分应用是通过哪个钩子触发的方法！" class="header-anchor">#</a> 3、区分应用是通过哪个钩子触发的方法！</h4> <p>每次钩子执行应用时会传递一个额外的参数到控制器内：<strong>HookName，钩子名称</strong>，可以通过<strong>HookName</strong>参数在控制器内区分到底是哪个钩子传递过来的参数，从而执行对应的操作！</p> <h3 id="_3、创建-删除自定义钩子的方法"><a href="#_3、创建-删除自定义钩子的方法" class="header-anchor">#</a> 3、创建/删除自定义钩子的方法</h3> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">//假设这是你的控制器index.php 文件</span>
<span class="token keyword">use</span> <span class="token package">lib<span class="token punctuation">\</span>Hook<span class="token punctuation">\</span>Hook</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> 你设置的应用标识
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * @param array $Data
     * 控制器入口
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">origin</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$Data</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Hook<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;钩子名称&quot;</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;待删除应用的标识&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除</span>
        Hook<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;钩子名称&quot;</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;待注册应用的标识&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//注册</span>
        Hook<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;钩子名称&quot;</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;传值内容(Array)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//执行钩子</span>
        Hook<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">arr</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;钩子名称&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//查询钩子内注册的应用，钩子名称留空查询全部</span>
        
        <span class="token comment">/**
         * 其中 execute 这个方法很有用，钩子大全内的钩子均是此方法创建的，如下：
         * ArticleSeek钩子就这样创建成功，其他应用就可以在此钩子内注册了
         * 每次触发这个钩子时，就会传递 ['uid' =&gt; -1] 的数组内容到注册过此钩子应用的控制器内
         */</span>
         Hook<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'ArticleSeek'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'uid'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
         <span class="token comment">/**
          * 你甚至可以将钩子触发器放在你自己的应用内，完成特定的操作，这里留一点想象空间，就不提示太多了
          */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="_4、钩子相关目录结构"><a href="#_4、钩子相关目录结构" class="header-anchor">#</a> 4、钩子相关目录结构</h3> <div class="language- extra-class"><pre><code>钩子操作文件存放目录：/includes/lib/Hook/
</code></pre></div><div class="language- line-numbers-mode"><pre class="language-text"><code>/Hook/
.
├── Hook.json 钩子规则配置文件
├── Hook.php 钩子操作方法，有兴趣可以了解一下，很简单
.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="沙盒测试"><a href="#沙盒测试" class="header-anchor">#</a> 沙盒测试</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>考虑到您开发应用时，是需要边调试边进行开发的，为此我们推出了<font color="#59c173">沙盒测试</font>模式，您只需要按照下列步骤即可搭建一个完美的沙盒开发环境！</p></div> <h3 id="_1、在本地或服务器搭建一个小储云商城"><a href="#_1、在本地或服务器搭建一个小储云商城" class="header-anchor">#</a> 1、在本地或服务器搭建一个小储云商城</h3> <p>登陆时您可以通过app或者小程序/H5登陆，如果是本地环境的话，您是无法直接在服务端点击确认登陆的，因为服务端无法对您本地端发送请求回调，您可以复制登陆token，直接填写token完成登陆</p> <h3 id="_2、在开发者后台里面发布一个新的应用-模式选择为-沙盒模式"><a href="#_2、在开发者后台里面发布一个新的应用-模式选择为-沙盒模式" class="header-anchor">#</a> 2、在开发者后台里面发布一个新的应用,模式选择为 <a href="#_1%E3%80%81%E5%8F%91%E5%B8%83%E6%A8%A1%E5%BC%8F">沙盒模式</a></h3> <p>发布时您需要先按照相关发布规范来构建您的应用安装包，然后提交即可</p> <h3 id="_3、在小储商城站长后台内的应用商店找到您的沙盒应用"><a href="#_3、在小储商城站长后台内的应用商店找到您的沙盒应用" class="header-anchor">#</a> 3、在小储商城站长后台内的应用商店找到您的沙盒应用</h3> <p>提交沙盒应用后您可在 <strong>小储商城站长后台/应用商店/我的/沙盒测试</strong> 里面找到您发布的沙盒应用！</p> <h3 id="_4、开始进行开发"><a href="#_4、开始进行开发" class="header-anchor">#</a> 4、开始进行开发</h3> <p>找到您发布的沙盒应用后，点击安装，开始对照开发文档进行开发，开发完成后，可以直接将此沙盒应用提交审核，审核通过后即可上线！</p> <h2 id="sdk及demo下载"><a href="#sdk及demo下载" class="header-anchor">#</a> SDK及DEMO下载</h2> <h3 id="_1、简单插件demo：网站防cc插件-doem"><a href="#_1、简单插件demo：网站防cc插件-doem" class="header-anchor">#</a> 1、简单插件demo：<a href="http://assets.api.ln.cn/data/20200817/13/1597671694_EEqT8yfRb8DrkhGa_%E7%BD%91%E7%AB%99%E9%98%B2C.zip" target="_blank" rel="noopener noreferrer">网站防CC插件(doem)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h3 id="_2、支付对接应用demo：易支付对接-doem"><a href="#_2、支付对接应用demo：易支付对接-doem" class="header-anchor">#</a> 2、支付对接应用demo：<a href="http://assets.api.ln.cn/data/20200817/13/1597671771_j6dPDxoAGz5iZNjM_%E6%98%93%E6%94%AF%E4%BB%98%E5%AF%B9%E6%8E%A5.zip" target="_blank" rel="noopener noreferrer">易支付对接(doem)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h3 id="_3、网站模板应用demo：普通模板开发结构-doem"><a href="#_3、网站模板应用demo：普通模板开发结构-doem" class="header-anchor">#</a> 3、网站模板应用demo：<a href="http://assets.api.ln.cn/data/20200817/13/1597672152_ASZdBiKHShKmC1IH_%E6%B5%8B%E8%AF%95%E6%A8%A1%E6%9D%BF.zip" target="_blank" rel="noopener noreferrer">普通模板开发结构(doem)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/pages/joint/" class="prev">
        系统对接
      </a></span> <span class="next"><a href="/pages/exploit/enter.html">
        入驻平台
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d1387d5f.js" defer></script><script src="/assets/js/2.8839d181.js" defer></script><script src="/assets/js/8.b69a98fd.js" defer></script>
  </body>
</html>
